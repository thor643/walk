Estado 1:

	Inicializar:
		Array ruta
		Array itinerario
		Variable velocidadSuperada
		Variable temporizador
		Variable distancia total

	Si la velocidad es mayor que 0 y menor que 6
		Ejecutar funcion crearYAlmacenarPunto
		Cambiamos a Estado 2

Estado 2:
	Si la velocidad es mayor que 6
		Si hay algún temporizador activo
			Parar temporizador
			Poner a 0 la variable temporizador
		Aumentamos velocidadSuperada
		Si velocidadSuperada es igual a 2
			Cambiamos a Estado 1
		Sino
			Ejecutar funcion crearYAlmacenarPunto
	Sino
		velocidadSuperada es igual a 0
		Si la velocidad es igual a 0
			Si no hay ningun temporizador activo
				Iniciamos el temporizador
				Si se cumple el tiempo
					Cambiamos a Estado 1
			Ejecutar funcion crearYAlmacenarPunto
		Sino
			Si hay algun temporizador activo
				Parar temporizador
				Poner a 0 la variable temporizador
			Ejecutar funcion crearYAlmacenarPunto
			
Estado 3:
	Si la velocidad es mayor que 6
		Si hay algún temporizador activo
			Parar temporizador
			Poner a 0 la variable temporizador
		Aumentamos velocidadSuperada
		Si velocidadSuperada es igual o mayor que 2
			Cambiamos a Estado 1
			Almacenamos la ruta en la base de datos
		Sino
			Ejecutar funcion crearYAlmacenarPunto
	sino
		velocidadSuperada es igual a 0
		Ejecutar funcion crearYAlmacenarPunto
		Si la velocidad es igual a 0
			Si no hay ningun temporizador activo
				Iniciamos el temporizador
				Si se cumple el tiempo
					Cambiamos a Estado 1
					Almacenamos la ruta en la base de datos
		Sino
			Si hay algun temporizador activo
				Parar temporizador
				Poner a 0 la variable temporizador

Funcion crearYAlmacenarPunto
	Creamos un nuevo punto
	Lo insertamos en la ruta
	Insertamos las coordenadas en el itinerario

	Si estado es igual a 2
		Miramos la distancia total del itinerario
		Si la distancia total del itinerario es mayor que 1000
			Cambiamos a Estado 3